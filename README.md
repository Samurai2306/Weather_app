# Приложение погоды

Веб-приложение для просмотра актуальной погоды в городах России с акцентом на Москву и Московскую область. Интерфейс с эффектом стеклянной морфологии (Glassmorphism), динамической сменой тем в зависимости от времени суток и погодных условий.

## О проекте

Приложение показывает текущую погоду, прогноз на 3 дня, а также детальную информацию для специальных локаций: станции Мытищи, Ярославского вокзала в Москве, корпусов РТУ МИРЭА, МЭИ и тд. Для маршрутов до университетов доступен прогноз погоды с временными интервалами.

### Основные возможности

- **Погода по городам** — выбор из множества городов России (Москва, Санкт-Петербург, Сочи, города Московской области)
- **Динамические темы** — автоматическая смена цветовой схемы:
  - Тёмно-фиолетовая тема для вечера и раннего утра
  - Мягкая персиковая тема для дневного времени
  - Специальные темы для дождя, снега и грозы
  - Тёмная и светлая темы с переключателем
- **Расширенные локации** — детальная погода для:
  - Станции Мытищи (сейчас и через 15 минут)
  - Ярославского вокзала в Москве (сейчас и через 1.5 часа)
  - РТУ МИРЭА на Вернадского (сейчас и через 1.5 часа)
  - РТУ МИРЭА на Малой Пироговской (сейчас и через 1.5 часа)
  - Главного корпуса МЭИ (сейчас и через 1.5 часа)
  - Локации "Дача" (сейчас и через 1.5 часа)
  - Возможность выбрать произвольное время для просмотра погоды
- **Маршруты до университетов** — прогноз погоды по пути следования:
  - Мытищи → Ярославский вокзал → Университет
  - Временные интервалы: сейчас/15 мин → 30/45 мин → 1 час/2 часа
- **Прогноз на 3 дня** — детальная информация о погоде на ближайшие дни
- **Сравнение с Москвой** — индикатор разницы температуры относительно Москвы
- **Экстремальные условия** — предупреждения о:
  - Экстремальном холоде (ниже -20°C)
  - Экстремальной жаре (выше 35°C)
  - Сильном ветре (более 15 м/с)
  - Грозе
- **Переключение единиц** — температура в градусах Цельсия или Фаренгейта
- **Поиск городов** — быстрый поиск по названию
- **Адаптивный дизайн** — корректное отображение на всех устройствах

## Технологии

- **React 19** — библиотека для создания пользовательского интерфейса
- **Vite 7** — инструмент сборки и dev-сервер
- **WeatherAPI.com** — API для получения данных о погоде
- **CSS3** — современная стилизация с использованием:
  - Glassmorphism (эффект матового стекла)
  - CSS Grid и Flexbox для адаптивной вёрстки
  - CSS Variables для динамических тем
  - Градиенты и анимации

## Установка и запуск

### Требования

- Node.js версии 20 или выше
- npm или yarn

### Быстрый старт

1. Клонируйте репозиторий:

```bash
git clone https://github.com/your-username/Weather_app.git
cd Weather_app
```

2. Установите зависимости:

```bash
npm install
```

3. Запустите dev-сервер:

```bash
npm run dev
```

Приложение будет доступно по адресу `http://localhost:5173`

### Доступные команды

```bash
npm run dev      # Запуск dev-сервера с горячей перезагрузкой
npm run build    # Сборка production-версии
npm run preview  # Предпросмотр собранной версии локально
npm run lint     # Проверка кода линтером
```

## Настройка API ключа

Приложение работает с предустановленным API ключом, но для использования собственного ключа:

1. Создайте файл `.env` в корне проекта
2. Добавьте ваш ключ:

```
VITE_WEATHER_API_KEY=ваш_ключ_здесь
```

Получить бесплатный API ключ можно на [weatherapi.com](https://www.weatherapi.com/)

Если API ключ не указан или произошла ошибка при запросе, приложение автоматически переключится в демо-режим с тестовыми данными.

## Структура проекта

```
Weather_app/
├── .github/
│   └── workflows/
│       └── deploy.yml          # GitHub Actions для деплоя
├── public/                      # Статические файлы
├── src/
│   ├── components/              # React компоненты
│   │   ├── Accordion.jsx        # Раскрывающиеся секции
│   │   ├── CitySelector.jsx     # Выбор города
│   │   ├── ExtremeWeatherAlert.jsx  # Предупреждения о погоде
│   │   ├── FocusLocationCard.jsx    # Карточка локации
│   │   ├── RouteSelector.jsx        # Выбор маршрута
│   │   ├── RouteWeather.jsx         # Погода по маршруту
│   │   └── WeatherDisplay.jsx        # Основной компонент погоды
│   ├── App.jsx                  # Главный компонент приложения
│   ├── App.css                   # Стили компонентов
│   ├── index.css                 # Глобальные стили и темы
│   └── main.jsx                  # Точка входа
├── index.html                    # HTML шаблон
├── vite.config.js                # Конфигурация Vite
└── package.json                  # Зависимости проекта
```

## Деплой на GitHub Pages

Проект настроен для автоматического деплоя на GitHub Pages через GitHub Actions.

### Первоначальная настройка

1. **Включите GitHub Pages:**

   - Откройте настройки репозитория (`Settings`)
   - Перейдите в раздел `Pages`
   - В поле `Source` выберите `Deploy from a branch`
   - В поле `Branch` выберите `gh-pages` и папку `/ (root)`
   - Нажмите `Save`

   После первого успешного деплоя ветка `gh-pages` будет создана автоматически.

2. **Настройте секрет для API ключа (опционально):**

   - Перейдите в `Settings` → `Secrets and variables` → `Actions`
   - Нажмите `New repository secret`
   - Имя: `VITE_WEATHER_API_KEY`
   - Значение: ваш API ключ от WeatherAPI.com
   - Нажмите `Add secret`

   Если секрет не добавлен, приложение будет использовать fallback ключ из кода.

3. **Проверьте base path:**
   - Откройте `vite.config.js`
   - Убедитесь, что base path соответствует имени вашего репозитория
   - По умолчанию используется автоматическое определение из `GITHUB_REPOSITORY`
   - Если нужно задать вручную, измените значение в функции `getBasePath()`

### Автоматический деплой

После настройки каждый push в ветки `main` или `master` автоматически запустит:

1. Установку зависимостей
2. Сборку проекта
3. Деплой на GitHub Pages (создание/обновление ветки `gh-pages`)

### Ручной запуск деплоя

Вы можете запустить деплой вручную:

1. Перейдите во вкладку `Actions` в репозитории
2. Выберите workflow `Deploy to GitHub Pages`
3. Нажмите `Run workflow`
4. Выберите ветку и нажмите `Run workflow`

### Проверка локально

Для проверки сборки с правильным base path:

```bash
npm run build
npm run preview
```

Откройте `http://localhost:4173` для просмотра собранной версии.

### Устранение проблем

**Ошибка "Permission denied" или "403 Forbidden":**

1. Убедитесь, что в настройках репозитория (`Settings` → `Actions` → `General`) включены права для GitHub Actions:

   - В разделе "Workflow permissions" выберите "Read and write permissions"
   - Поставьте галочку "Allow GitHub Actions to create and approve pull requests"
   - Нажмите `Save`

2. Если проблема сохраняется, создайте Personal Access Token:
   - Перейдите в `Settings` → `Developer settings` → `Personal access tokens` → `Tokens (classic)`
   - Создайте новый токен с правами `repo` (полный доступ к репозиториям)
   - Скопируйте токен
   - Добавьте его как секрет: `Settings` → `Secrets and variables` → `Actions` → `New repository secret`
   - Имя: `GH_PAGES_TOKEN`
   - Значение: ваш токен
   - В файле `.github/workflows/deploy.yml` замените `${{ secrets.GITHUB_TOKEN }}` на `${{ secrets.GH_PAGES_TOKEN }}`

**Ошибка "Get Pages site failed":**

1. Убедитесь, что GitHub Pages включен в настройках репозитория
2. Проверьте, что выбран источник `Deploy from a branch` и ветка `gh-pages`
3. После первого успешного деплоя ветка `gh-pages` будет создана автоматически
4. Если проблема сохраняется, попробуйте запустить workflow вручную через `Actions`

## Особенности реализации

### Динамические темы

Тема приложения меняется автоматически в зависимости от:

- Времени суток (утро, день, вечер, ночь)
- Погодных условий (дождь, снег, гроза, ясно)
- Выбора пользователя (тёмная/светлая тема)

Цветовые схемы определены в `src/index.css` через CSS переменные.

### Обработка данных

Приложение нормализует данные от WeatherAPI.com для единообразного отображения:

- Температура округляется до целых значений
- Скорость ветра конвертируется из км/ч в м/с
- Время форматируется в локальном формате
- Коды погоды используются для определения темы и предупреждений

### Компоненты

Все компоненты написаны как функциональные с использованием React Hooks:

- `useState` — для локального состояния
- `useEffect` — для побочных эффектов и загрузки данных
- `useCallback` — для мемоизации функций
- `useMemo` — для оптимизации вычислений

## Лицензия

Проект создан в образовательных целях. Свободное использование и модификация.

## Автор

Разработано для практики работы с React, Vite и внешними API.
